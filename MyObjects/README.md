# R Tips

* 乱数シードの固定と解除  
一旦固定すると、解除するまでは固定したシードをスタートに決まった順番に乱数が得られる  
`set.seed(X)`  
`set.seed(NULL)`  
* ts型  
`autoplot`、`ggtsdisplay`でグラフ化する場合、データはts型である必要がある  
* `plot`のパラメータ  
  col: 色（全ポイントについて指定）  
  pch: マーカーのタイプ  
  cex: マーカーのフォント（倍率）  
  cex.main: mainのフォント（倍率）  
  cex.lab: labelのフォント（倍率）  
  font.lab: labelのフォント  
  xaxt: 横軸の設定  
  lwd: 線幅  
  lty: 線種  
  mar: 余白  
  type: プロットのタイプ（p: ポイント、l: 線、b: 両方等）  
  
* `legend`のパラメータ  
  bty: 凡例の枠のタイプ  

# 統計 Tips
* 不偏分散  
推定値から算出した分散は偏りがあるため、固めに見積もる  
⇒ 通常の分散より大きくなるように小さい数字で割る  
* 標準誤差  
推定値の不確実性の尺度、不偏分散をサンプルサイズで割ったもの（中心極限定理）  

  <img src="https://latex.codecogs.com/gif.latex?\sqrt{\frac{s^{2}}{n}}" />  
* p値  
帰無仮説の下で観測される値が、実現したt値を超える確率  
⇒ p値が小さいほどt値は大きい  
⇒ p値が小さいほど有意
⇒ p値が小さいほど帰無仮説は棄却される  
* t検定  
検定量が有意にゼロと異なるかを検定  
  <img src="https://latex.codecogs.com/gif.latex?\frac{\bar{x}}{\sqrt{\frac{s^{2}}{n}}}" />  

* 分散分析（ANOVA）  
条件別に期待値が有意に異なるかを検定  
条件別期待値のばらつきと残差のばらつきの比を検定（Type1）  
無条件期待値（ナイーブ予測）の残差と条件別期待値（条件別予測）の残差の差の検定と同義  
⇒　変数に一つだけモデルを指定した場合（二つ指定すると両者の残差の差の検定となる  
Type2は各変数を除いた時の残差の変分を検定している  
交差項を含む回帰モデルを検定する場合はType3を用いる    

* パラメトリックブートストラップ検定  
任意の条件に基づくデータをシミュレーションで生成して分布を作成し、実際のデータが当該分布において、どう評価されるかを確認する  

* 尤度  
設定したパラメータの時に実際に得られたデータ系列が発生する確率  
尤度が最も高くなるようにパラメータを決定するのが最尤法  
分布は何でも  

* AIC  
　`-2 × （対数尤度 - パラメータ数）`: 予測値の対数尤度の期待値（バイアス調整済み）  
　⇒ 予測値の当てはまりの期待値を表す  

* 一般化線形モデル  
線形予測子:  
　モデルの右辺、説明変数の線形結合部分  
リンク関数:  
　モデルの左辺、被説明変数を変換する関数（ログ、逆関数、ロジット等）  
誤差構造:  
　（リンク関数で変換後の）被説明変数が従うべき確率分布（二項分布、ポアソン分布、ガンマ分布等）  

* 一般化線形モデルの検定  
deviance:  
　完璧な予測の対数尤度と推定したモデルの対数尤度の差を2倍したもの  
　モデルの説明力が高いほど、小さくなる（正規線形モデルの二乗誤差に相当）  
deviance残差:  
　各データの対数確率の差（完璧なモデルと予測モデル）の2倍を平方根（正負は予測値の大小で決める）  
　符号は予測値が実測値より小さい場合に正、大きい場合に負とする  
　二乗合計はdevianceに一致する ⇒ 正規線形モデルの残差同様に扱える  
ward検定:  
　正規線形モデルに対する回帰係数のt検定に相当  
　正規分布する（故にz統計量と呼ぶ）  
尤度比検定:  
　正規線形モデルのANOVAに相当  
　ナイーブ予測のdevianceと予測モデルのdevianceの差の検定  
　devianceの差（尤度比の対数値×２）  
　カイ二乗分布に従う（但し、サンプルサイズが必要）   
 
 
 
 
 
 
 

